{
  "version": "1.0",
  "description": "Default argument sanitization rules for libclang compatibility",
  "comment": "These rules remove compiler flags that cause libclang parsing failures or are incompatible with programmatic use",

  "rules": [
    {
      "id": "pch-winvalid",
      "type": "exact_match",
      "patterns": ["-Winvalid-pch", "-Wno-invalid-pch"],
      "description": "Remove PCH-related warning flags"
    },
    {
      "id": "color-diagnostics",
      "type": "exact_match",
      "patterns": [
        "-fcolor-diagnostics",
        "-fno-color-diagnostics",
        "-fdiagnostics-color",
        "-fno-diagnostics-color",
        "-fansi-escape-codes"
      ],
      "description": "Remove cosmetic color/diagnostic formatting options"
    },
    {
      "id": "debug-info",
      "type": "exact_match",
      "patterns": ["-g", "-ggdb", "-g0", "-g1", "-g2", "-g3", "-fno-limit-debug-info"],
      "description": "Remove debug information flags that don't affect AST"
    },
    {
      "id": "optimization",
      "type": "exact_match",
      "patterns": ["-O0", "-O1", "-O2", "-O3", "-Os", "-Ofast", "-Og"],
      "description": "Remove optimization level flags"
    },
    {
      "id": "architecture",
      "type": "exact_match",
      "patterns": ["-m64", "-m32", "-msse2", "-mfpmath=sse"],
      "description": "Remove architecture-specific options"
    },
    {
      "id": "visibility",
      "type": "exact_match",
      "patterns": [
        "-fvisibility-inlines-hidden",
        "-fvisibility=hidden",
        "-fvisibility=default"
      ],
      "description": "Remove visibility options"
    },
    {
      "id": "pic",
      "type": "exact_match",
      "patterns": ["-fPIC", "-fPIE", "-fpic", "-fpie"],
      "description": "Remove position independent code options"
    },
    {
      "id": "constexpr-limits",
      "type": "prefix_match",
      "patterns": ["-fconstexpr-steps=", "-fconstexpr-depth="],
      "description": "Remove constexpr limit options that may differ between compiler versions"
    },
    {
      "id": "template-depth",
      "type": "prefix_match",
      "patterns": ["-ftemplate-depth="],
      "description": "Remove template depth limit options"
    },
    {
      "id": "xclang-include-pch",
      "type": "xclang_sequence",
      "sequence": ["-Xclang", "-include-pch", "-Xclang", "<arg>"],
      "description": "Remove -Xclang -include-pch -Xclang <pch-file> sequences"
    },
    {
      "id": "xclang-include-cmake-pch",
      "type": "xclang_conditional_sequence",
      "sequence": ["-Xclang", "-include", "-Xclang", "<arg>"],
      "condition": {
        "arg_index": 0,
        "contains": ["pch", "cmake_pch"]
      },
      "description": "Remove -Xclang -include -Xclang <file> when file contains 'pch' or 'cmake_pch'"
    },
    {
      "id": "xclang-emit-pch",
      "type": "xclang_option_with_value",
      "patterns": ["-emit-pch", "-include-pch-header", "-fmodules-cache-path"],
      "description": "Remove -Xclang <option> [value] for PCH/module options"
    },
    {
      "id": "standalone-include-pch",
      "type": "flag_with_optional_value",
      "pattern": "-include-pch",
      "description": "Remove standalone -include-pch flag and its value if present"
    }
  ]
}
